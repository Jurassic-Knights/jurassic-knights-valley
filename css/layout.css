/* Layout System - Responsive for Mobile + 16:9 PC */

/* Main App Container */
#app {
    position: relative;
    width: 100%;
    height: 100vh;
    max-width: var(--app-max-width);
    margin: 0 auto;
    overflow: hidden;
}

/* === MOBILE PORTRAIT (default, 9:16) === */
@media (max-width: 480px) {
    :root {
        --app-max-width: 100%;
    }

    #app {
        max-width: 100%;
    }
}

/* === MOBILE LANDSCAPE (16:9 small) === */
@media (min-width: 481px) and (max-width: 768px) {
    :root {
        --app-max-width: 100%;
    }

    #app {
        max-width: 100%;
    }
}

/* === TABLET / DESKTOP (16:9 PC) === */
@media (min-width: 769px) {
    :root {
        --app-max-width: 480px;
    }

    body {
        display: flex;
        align-items: center;
        justify-content: center;
        min-height: 100vh;
        background: #000;
    }

    #app {
        height: calc(100vh - 40px);
        max-height: 900px;
        border-radius: var(--border-radius-lg);
        box-shadow: var(--shadow-lg);
    }
}

/* === VFX Canvas Layers === */
#vfx-canvas,
#vfx-canvas-fg {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    pointer-events: none;
}

#vfx-canvas {
    z-index: 10;
    /* Behind UI */
}

#vfx-canvas-fg {
    z-index: 200;
    /* Above UI */
}

/* === Grid Utilities === */
.grid {
    display: grid;
    gap: var(--space-md);
}

.grid-2 {
    grid-template-columns: repeat(2, 1fr);
}

.grid-3 {
    grid-template-columns: repeat(3, 1fr);
}

.grid-4 {
    grid-template-columns: repeat(4, 1fr);
}

/* === Flex Utilities === */
.flex {
    display: flex;
}

.flex-col {
    flex-direction: column;
}

.flex-center {
    align-items: center;
    justify-content: center;
}

.flex-between {
    justify-content: space-between;
}

.flex-wrap {
    flex-wrap: wrap;
}

.gap-sm {
    gap: var(--space-sm);
}

.gap-md {
    gap: var(--space-md);
}

/* === Game Canvas === */
#game-container {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: 1;
}

#game-canvas {
    display: block;
    width: 100%;
    height: 100%;
}

/* === Virtual Joystick === */
#joystick-area {
    display: none !important;
    /* Force Hidden: User request to remove analog stick */
    position: absolute;
    bottom: 20px;
    left: 20px;
    width: 150px;
    height: 150px;
    z-index: 100;
    touch-action: none;
}

#joystick-base {
    position: absolute;
    width: 100px;
    height: 100px;
    background: rgba(212, 175, 55, 0.2);
    border: 3px solid rgba(212, 175, 55, 0.5);
    border-radius: 50%;
    transform: translate(-50%, -50%);
    left: 50%;
    top: 50%;
    opacity: 0.5;
    transition: opacity var(--transition-fast);
}

#joystick-knob {
    position: absolute;
    width: 40px;
    height: 40px;
    background: rgba(212, 175, 55, 0.8);
    border: 2px solid var(--color-accent-gold);
    border-radius: 50%;
    transform: translate(-50%, -50%);
    left: 50%;
    top: 50%;
    opacity: 0.5;
    transition: opacity var(--transition-fast);
}

/* === Loading Screen - Military Theme === */
#loading {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    gap: 24px;
    background: var(--color-primary-dark);
    color: var(--color-text-primary);
    font-family: var(--font-display);
    font-size: var(--font-size-lg);
    z-index: 1000;
}

#loading p {
    color: var(--color-text-gold);
    letter-spacing: 3px;
    text-transform: uppercase;
    animation: loading-text-pulse 2s ease-in-out infinite;
}

@keyframes loading-text-pulse {

    0%,
    100% {
        opacity: 0.5;
    }

    50% {
        opacity: 1;
    }
}

#loading .loading-bar {
    width: 200px;
    height: 6px;
    background: var(--color-primary-mid);
    border: 1px solid var(--color-accent-iron);
    border-radius: 3px;
    overflow: hidden;
    box-shadow: var(--shadow-inset);
}

#loading .loading-bar-fill {
    width: 40%;
    height: 100%;
    background: var(--gradient-brass);
    border-radius: 2px;
    animation: loading-bar-sweep 1.5s ease-in-out infinite;
}

@keyframes loading-bar-sweep {
    0% {
        transform: translateX(-100%);
    }

    100% {
        transform: translateX(350%);
    }
}

/* === CINEMATIC FADE OVERLAY === */
#fade-overlay {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: #000;
    opacity: 0;
    pointer-events: none;
    transition: opacity 0.5s ease-in-out;
    z-index: 5000;
    /* Above everything */
}

#fade-overlay.fade-active {
    opacity: 1;
    pointer-events: all;
}