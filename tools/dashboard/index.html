<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Asset Dashboard (Field Command)</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Cinzel:wght@700&family=Courier+Prime:wght@400;700&family=Special+Elite&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="./css/style.css">
</head>

<body>
    <header>
        <h1>ğŸ¦– Asset Dashboard <span class="server-badge">Vite + HMR</span></h1>
        <div class="controls">
            <button id="btnTemplates" class="secondary" data-action="toggle-templates">ğŸ“ Templates</button>

            <button id="btnHero" class="secondary" data-action="navigate-category" data-category="hero"
                style="background:#2196f3;">ğŸ›¡ï¸
                Hero</button>
            <button id="btnEnemies" class="secondary" data-action="navigate-category" data-category="enemies"
                style="background:#e91e63;">ğŸ¦– Enemies</button>
            <button id="btnBosses" class="secondary" data-action="navigate-category" data-category="bosses"
                style="background:#9c27b0;">ğŸ‘‘
                Bosses</button>
            <button id="btnNpcs" class="secondary" data-action="navigate-category" data-category="npcs"
                style="background:#4caf50;">ğŸ‘¤
                NPCs</button>
            <button id="btnItems" class="secondary" data-action="navigate-category" data-category="items"
                style="background:#795548;">ğŸ§±
                Items</button>
            <button id="btnEquipment" class="secondary" data-action="navigate-category" data-category="equipment"
                style="background:#9c27b0;">âš”ï¸ Equipment</button>
            <button id="btnResources" class="secondary" data-action="navigate-category" data-category="resources"
                style="background:#ff9800;">ğŸª¨ Resources</button>
            <button id="btnNodes" class="secondary" data-action="navigate-category" data-category="nodes"
                style="background:#6d4c41;">â›ï¸
                Nodes</button>
            <button id="btnEnvironment" class="secondary" data-action="navigate-category" data-category="environment"
                style="background:#8bc34a;">ğŸŒ² Environment</button>
            <button id="btnUI" class="secondary" data-action="navigate-category" data-category="ui"
                style="background:#03a9f4;">ğŸ–¼ï¸
                UI</button>
            <button id="btnConfig" class="secondary" data-action="toggle-config" style="background:#607d8b;">âš™ï¸
                Config</button>
            <button id="btnMapEditor" class="secondary" data-action="toggle-map-editor"
                style="background:#3f51b5; border: 1px solid #7986cb;">ğŸŒ
                Map Editor</button>
            <button id="btnRefresh" class="secondary" data-action="refresh-manifest">ğŸ”„</button>
        </div>
    </header>

    <div class="stats">
        <div class="stat pending"><span class="stat-value" id="statPending">-</span><span
                class="stat-label">Pending</span></div>
        <div class="stat approved"><span class="stat-value" id="statApproved">-</span><span
                class="stat-label">Approved</span></div>
        <div class="stat declined"><span class="stat-value" id="statDeclined">-</span><span
                class="stat-label">Declined</span></div>
        <div class="stat clean"><span class="stat-value" id="statClean">-</span><span class="stat-label">Clean</span>
        </div>
    </div>

    <div class="sticky-bar">
        <div class="filters">
            <div class="filter-row">
                <span class="filter-label">Status:</span>
                <button class="filter-btn secondary active" data-filter="all">All</button>
                <button class="filter-btn secondary" data-filter="pending">Pending</button>
                <button class="filter-btn secondary" data-filter="approved">Approved</button>
                <button class="filter-btn secondary" data-filter="declined">Declined</button>
                <button class="filter-btn secondary" data-filter="clean">Clean</button>
                <button class="filter-btn secondary" data-filter="missing" style="border-color: var(--accent);">âš ï¸
                    Missing</button>
            </div>
            <div class="filter-row">
                <span class="filter-label">Folder:</span>
                <div class="category-filters" id="categoryFilters"></div>
            </div>
        </div>
    </div>

    <main id="mainContent">
        <div class="loading">Loading assets...</div>
    </main>

    <!-- Map Editor Container (Full Screen Overlay) -->
    <div id="map-editor-container"
        style="display:none; position:fixed; top:80px; left:0; right:0; bottom:0; background:#1a1a1a; z-index:100;">
        <!-- Sidebar (Palette) -->
        <div id="map-editor-sidebar"
            style="position:absolute; top:0; left:0; width:300px; bottom:0; background:#2d2d2d; border-right:1px solid #444; overflow-y:auto; padding:10px; color:#ddd;">
            <h3>Asset Palette</h3>
            <div id="palette-content"></div>
        </div>

        <!-- Canvas Area -->
        <div id="map-editor-canvas" style="position:absolute; top:0; left:300px; right:0; bottom:0; overflow:hidden;">
        </div>

        <!-- Toolbar (Top Right) -->
        <div id="map-editor-toolbar"
            style="position:absolute; top:10px; right:10px; background:rgba(0,0,0,0.8); padding:10px; border-radius:8px; color:white; pointer-events:none;">
            <div>Coords: <span id="cursor-coords">0, 0</span></div>
            <div>Phase: <span id="editor-phase">Painting</span></div>
            <div style="margin-top:5px; pointer-events:auto;">
                <button data-action="save-map-data">ğŸ’¾ Save Map</button>
            </div>
        </div>
    </div>

    <div class="modal" id="imageModal">
        <span class="modal-close" data-action="close-modal">Ã—</span>
        <div class="modal-header">
            <button class="modal-toggle" id="toggleComparison" data-action="toggle-comparison">ğŸ“Š Compare</button>
        </div>
        <img id="modalImage" src="" alt="Preview" style="display:block;">
        <div class="comparison-view" id="comparisonView" style="display:none;">
            <div class="comparison-panel original">
                <img id="compareOriginal" src="" alt="Original">
                <div class="comparison-label">Original</div>
            </div>
            <div class="comparison-panel clean">
                <img id="compareClean" src="" alt="Clean">
                <div class="comparison-label">Clean</div>
            </div>
        </div>
        <div class="modal-info" id="modalInfo"></div>
    </div>

    <!-- Vite handles TypeScript directly - no pre-compilation needed -->
    <script type="module" src="./src/main.ts"></script>
</body>

</html>